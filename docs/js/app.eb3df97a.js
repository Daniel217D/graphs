!function(t){function n(n){for(var r,u,c=n[0],a=n[1],s=n[2],l=0,d=[];l<c.length;l++)u=c[l],Object.prototype.hasOwnProperty.call(o,u)&&o[u]&&d.push(o[u][0]),o[u]=0;for(r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r]);for(f&&f(n);d.length;)d.shift()();return i.push.apply(i,s||[]),e()}function e(){for(var t,n=0;n<i.length;n++){for(var e=i[n],r=!0,c=1;c<e.length;c++){var a=e[c];0!==o[a]&&(r=!1)}r&&(i.splice(n--,1),t=u(u.s=e[0]))}return t}var r={},o={0:0},i=[];function u(n){if(r[n])return r[n].exports;var e=r[n]={i:n,l:!1,exports:{}};return t[n].call(e.exports,e,e.exports,u),e.l=!0,e.exports}u.m=t,u.c=r,u.d=function(t,n,e){u.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:e})},u.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},u.t=function(t,n){if(1&n&&(t=u(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(u.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var r in t)u.d(e,r,function(n){return t[n]}.bind(null,r));return e},u.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return u.d(n,"a",n),n},u.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},u.p="";var c=window.webpackJsonp=window.webpackJsonp||[],a=c.push.bind(c);c.push=n,c=c.slice();for(var s=0;s<c.length;s++)n(c[s]);var f=a;i.push([141,1]),e()}({141:function(t,n,e){"use strict";e.r(n);e(27),e(40),e(97);function r(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}function o(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}var u=function(){function t(n){var e=this;!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),i(this,"status",void 0),i(this,"set",(function(t){return e.status=t})),this.field=n}var n,e,r;return n=t,(e=[{key:"print",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];!1!==t&&this.set(t);var n="";0===t.length?n="Пустое множество":Array.isArray(t)?(n="<ul>",t.forEach((function(t){n+="<li>",t.forEach((function(t){n+=t+", "})),n=n.substring(0,n.length-2),n+=";</li>"})),n+="</ul>"):n=t,this.field.innerHTML=n}}])&&o(n.prototype,e),r&&o(n,r),t}(),c=(e(69),e(72),e(73),e(74),e(102),e(103),e(104),e(105),e(76),e(107),e(53),e(110),e(111),e(113),e(114),e(115),e(116),e(117),e(120),e(122),e(85),e(86),e(87),e(88),e(127),e(133),e(57),e(92),function(t,n,e,r){return Math.sqrt(Math.pow(t-e,2)+Math.pow(n-r,2))}),a=function(t,n,e,r){return Math.atan2(r-n,e-t)},s=function(){var t=a.apply(void 0,arguments);return{x:Math.cos(t),y:Math.sin(t)}},f=function(t){return{x:Math.cos(t),y:Math.sin(t)}};function l(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function d(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}var h={id:-1,paths:[],r:30,color:"black"},p=function t(){var n=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h.id,r=arguments.length>1?arguments[1]:void 0,o=arguments.length>2?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:h.r,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:h.color,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:h.paths;l(this,t),d(this,"printDot",(function(t){t.gDot(n.x,n.y,n.r,n.color,n.id)})),d(this,"printPaths",(function(t){n.paths.forEach((function(e){e.id;var r=e.x,o=e.y;t.gArrow(n.x,n.y,r,o,n.r)}))})),d(this,"addPath",(function(t){return n.paths.push(t)})),d(this,"setPos",(function(t,e){n.x=t,n.y=e})),this.id=e,this.x=r,this.y=o,this.paths=Array.from(c),this.r=i,this.color=u};function y(t){return function(t){if(Array.isArray(t))return v(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,n){if(!t)return;if("string"==typeof t)return v(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(e);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return v(t,n)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}function g(t,n,e){return(g=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}()?Reflect.construct:function(t,n,e){var r=[null];r.push.apply(r,n);var o=new(Function.bind.apply(t,r));return e&&b(o,e.prototype),o}).apply(null,arguments)}function b(t,n){return(b=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,n)}function m(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}function w(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}e(138),e(140);function x(t){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function j(t,n){return!n||"object"!==x(n)&&"function"!=typeof n?O(t):n}function O(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function P(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function _(t){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function E(t,n){return(E=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,n)}function I(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}var k=function(t){!function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&E(t,n)}(r,t);var n,e=(n=r,function(){var t,e=_(n);if(P()){var r=_(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return j(this,t)});function r(){var t;!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,r);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return I(O(t=e.call.apply(e,[this].concat(o))),"gArrow",(function(n,e,r,o){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:h.r,u=20,c=s(n,e,r,o),l=r-c.x*i,d=o-c.y*i,p=r-2*c.x*u,y=o-2*c.y*u,v=f(a(l,d,p,y)-30*Math.PI/180),g=f(a(l,d,p,y)+30*Math.PI/180);return t.gLine(n,e,r,o).gLine(l,d,l+v.x*u,d+v.y*u).gLine(l,d,l+g.x*u,d+g.y*u)})),I(O(t),"gLine",(function(n,e,r,o){return t.beginPath().line(n,e,r,o).closePath().stroke()})),I(O(t),"gDot",(function(n,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:h.r,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:h.color,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";return t.save().beginPath().set({fillStyle:"white",strokeStyle:o,font:"30px Arial",textAlign:"center"}).circle(n,e,r).stroke().fill().set("fillStyle",o).fillText(i,n,e+r/4).closePath().restore()})),t}return r}(e(93).CanvasCM),S=function(t){return new k(t)}(document.getElementById("canvas")).setSize(),A=new function t(n){var e=this;!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),r(this,"set",(function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return e[t]={status:n,obj:r}})),r(this,"statusIs",(function(t,n){var r;return n===(null===(r=e[t])||void 0===r?void 0:r.status)})),r(this,"getObj",(function(t){return void 0!==e[t]?e[t].obj:void 0})),this.x=0,this.y=0,this.mouseDown={status:!1,obj:{}},this.drag={status:!1,obj:{}},this.click={status:!1,obj:{}};var o=n.getBoundingClientRect();n.addEventListener("mousemove",(function(t){e.x=t.clientX-o.left,e.y=t.clientY-o.top}))}(S.get("canvas")),M=new function t(n){var e=this;!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),m(this,"dots",[]),m(this,"getById",(function(t){return e.dots.findIndex((function(n){return n.id===t}))})),m(this,"getByCoordinates",(function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r=Object.assign({r:h.r,except:[]},r),e.dots.find((function(e){return c(t,n,e.x,e.y)<=e.r+r.r&&!r.except.includes(e.id)}))})),m(this,"getLastId",(function(){var t;return(null===(t=e.dots[e.dots.length-1])||void 0===t?void 0:t.id)||0})),m(this,"add",(function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var o=g(p,[e.getLastId()+1].concat(n));return e.dots.push(o),o})),m(this,"addDots",(function(t){return t.forEach((function(t){return e.add.apply(e,y(t))}))})),m(this,"addPath",(function(t,n){Number.isInteger(t)&&(t=e.dots[e.getById(t)]),Number.isInteger(n)&&(n=e.dots[e.getById(n)]),void 0!==t&&void 0!==n?t.id!==n.id&&t.paths.every((function(t){return t.id!==n.id}))&&t.addPath(n):console.warn("Dots::addPath",t,n)})),m(this,"addPaths",(function(t){return t.forEach((function(t){return e.addPath.apply(e,y(t))}))})),m(this,"remove",(function(t){e.dots.splice(e.getById(t),1)})),m(this,"clear",(function(){return e.dots=[]})),m(this,"print",(function(){e.dots.forEach((function(t){return t.printPaths(e.$gcanvas)})),e.dots.forEach((function(t){return t.printDot(e.$gcanvas)}))})),m(this,"maximal_internal_stability",(function(){if(0===e.dots.length)return[];var t=[],n=[],r=[],o=e.dots.map((function(t){return t.id}));if(e.dots.forEach((function(n){return n.paths.forEach((function(e){return t.push([n.id,e.id])}))})),0===t.length)return[o.map((function(t){return t}))];t.forEach((function(n){var e=t.findIndex((function(t){return t[0]===n[1]&&t[1]===n[0]}));e>=0&&t.splice(e,1)}));var i=e.dots.length;return function t(e){var o,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e.length-1===u?e[u].forEach((function(t){if(o=r.includes(t),r.length+!o<=i){r.length+!o<i&&(i=r.length+!o,n=[]);var e=o?[].concat(r):[].concat(r,[t]);!n.some((function(t){return t.every((function(t){return e.includes(t)}))}))&&n.push(e)}})):e[u].forEach((function(n){o=r.includes(n),r.length+!o<=i&&(o||r.push(n),t(e,u+1),o||r.pop())}))}(t),n.map((function(t){return o.filter((function(n){return-1===t.findIndex((function(t){return t===n}))}))})).reverse()})),m(this,"minimal_external_stability",(function(){if(0===e.dots.length)return[];var t=[],n=[],r=[],o=e.dots.map((function(t){return t.id}));if(e.dots.forEach((function(n){return t.push([n.id].concat(y(n.paths.map((function(t){return t.id})))))})),0===t.length)return[o.map((function(t){return t}))];t.forEach((function(t,n,e){for(var r=n+1;r<e.length;r++)e[r].length===t.length&&e[r].every((function(n){return t.includes(n)}))&&e.splice(r,1)}));!function t(e){var o,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e.length-1===i?e[i].forEach((function(t){var e=(o=r.includes(t))?[].concat(r):[].concat(r,[t]);!n.some((function(t){return e.length>=t.length&&t.every((function(t){return e.includes(t)}))}))&&(n=n.filter((function(t){return t.length<=e.length||!e.every((function(n){return t.includes(n)}))}))).push(e)})):e[i].forEach((function(n){(o=r.includes(n))||r.push(n),t(e,i+1),o||r.pop()}))}(t);var i=n.reduce((function(t,n){return n.length<t?n.length:t}),n[0].length);return n.filter((function(t){return t.length===i}))})),m(this,"cores",(function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=e.maximal_internal_stability(),r=e.minimal_external_stability(),o=[],i=1;return n.forEach((function(n){return r.forEach((function(e){var r=y(new Set(n.filter((function(t){return e.includes(t)}))));r.length>=i&&(t&&r.length>i&&(o=[],i=r.length),!o.some((function(t){return t.length===r.length&&t.every((function(t){return r.includes(t)}))}))&&o.push(r))}))})),o})),this.$gcanvas=n}(S),C=new function t(n){var e=this;!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),w(this,"demo1",(function(){e.dots.clear(),e.dots.addDots([[300,300],[600,300],[600,600],[350,700],[800,700],[800,200],[800,300],[900,400],[800,500],[200,500]]),e.dots.addPaths([[1,2],[1,10],[1,4],[2,3],[3,2],[3,5],[3,4],[2,4],[5,2],[5,4],[6,2],[6,7],[7,8],[8,5],[8,9],[9,5],[10,4]])})),w(this,"demo2",(function(){e.dots.clear(),e.dots.addDots([[300,300],[600,300],[600,600],[300,600]]),e.dots.addPaths([[1,2],[1,3],[1,4],[2,1],[3,1],[4,3]])})),this.dots=n}(M),D=new u(document.getElementById("status"));function B(){requestAnimationFrame(B),S.clear(),M.print(),A.statusIs("click","dot")&&S.gArrow(A.getObj("click").x,A.getObj("click").y,A.x,A.y,0)}C.demo1(),S.on("mousedown",(function(){var t=M.getByCoordinates(A.x,A.y,{r:0});t&&A.set("mousedown","dot",t)})).on("mousemove",(function(){if(A.statusIs("mousedown","dot")&&!A.statusIs("click","dot")){var t=A.getObj("mousedown");A.set("mousedown",!1),A.set("drag","dot",t)}if(A.statusIs("drag","dot")){var n=A.getObj("drag").id,e=M.getByCoordinates(A.x,A.y,{except:[n]});e&&e.id!==n||A.getObj("drag").setPos(A.x,A.y)}})).on("click",(function(){if(A.statusIs("drag","dot"))A.set("drag",!1);else{A.statusIs("mousedown","dot")&&A.set("mousedown",!1);var t=M.getByCoordinates(A.x,A.y);if(t){M.getByCoordinates(A.x,A.y,{r:0})&&!A.statusIs("click","dot")?A.set("click","dot",t):A.statusIs("click","dot")&&t&&(M.addPath(A.getObj("click"),t),A.set("click",!1))}else{var n=M.add(A.x,A.y);A.statusIs("click","dot")&&(M.addPath(A.getObj("click"),n),A.set("click",!1))}}})).on("contextmenu",(function(t){A.statusIs("click","dot")&&A.set("click",!1),t.preventDefault()})),[{id:"canvas-clear",func:M.clear},{id:"canvas-maximal_internal_stability",func:function(){return D.print(M.maximal_internal_stability())}},{id:"canvas-minimal_external_stability",func:function(){return D.print(M.minimal_external_stability())}},{id:"canvas-cores",func:function(){return D.print(M.cores())}},{id:"canvas-cores__maximal",func:function(){return D.print(M.cores(!0))}}].forEach((function(t){var n=t.id,e=t.func;return document.getElementById(n).addEventListener("click",e)})),B(),window.addEventListener("resize",(function(){S.setSize(),B()}))},97:function(t,n,e){}});
//# sourceMappingURL=app.eb3df97a.js.map